<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡πÄ‡∏Å‡∏° Food Pyramid (‡∏õ.5)</title>
  <style>
    :root{
      --bg:#faf9ff; --ink:#1f2937; --muted:#6b7280; --brand:#10b981; --brand-2:#60a5fa; --warn:#f59e0b; --error:#ef4444; --ok:#22c55e;
      --card:#ffffff; --drop:#f1f5f9; --shadow:0 10px 30px rgba(2,6,23,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:system-ui,-apple-system,'Segoe UI',Roboto,Inter,'Noto Sans Thai',sans-serif; color:var(--ink); background:linear-gradient(180deg,#f5f7ff 0%, #fbfbff 60%, #fff 100%)}
    .container{max-width:1100px; margin:0 auto; padding:20px}
    header{display:flex; flex-wrap:wrap; gap:14px; align-items:center; justify-content:space-between}
    h1{font-size:clamp(22px,3.5vw,34px); margin:0}
    .subtitle{color:var(--muted); font-size:14px}
    .controls{display:flex; gap:10px; flex-wrap:wrap}
    button{appearance:none; border:0; padding:10px 14px; border-radius:12px; background:var(--brand-2); color:#fff; font-weight:700; cursor:pointer; box-shadow:var(--shadow)}
    button.secondary{background:#1118270f; color:#111827}
    button.warn{background:var(--warn)}
    button:disabled{opacity:.6; cursor:not-allowed}

    .board{display:grid; grid-template-columns: 1.1fr .9fr; gap:18px; margin-top:18px}
    @media (max-width: 980px){.board{grid-template-columns:1fr}}

    .card{background:var(--card); border-radius:18px; box-shadow:var(--shadow); padding:16px}
    .pyramid{display:grid; gap:10px}

    .row{display:grid; grid-template-columns: 160px 1fr; gap:10px; align-items:center}
    .row-label{background:#11182708; padding:10px 12px; border-radius:12px; font-weight:700}

    .dropzone{min-height:62px; background:var(--drop); border:2px dashed #cbd5e1; border-radius:14px; padding:8px; display:flex; flex-wrap:wrap; gap:8px; align-content:flex-start}
    .dropzone.is-over{border-color:var(--brand); background:#ecfeff}

    .pool{display:flex; flex-wrap:wrap; gap:10px; align-content:flex-start; min-height:220px}

    .item{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:12px; background:#fff; border:1px solid #e5e7eb; cursor:grab; user-select:none; box-shadow:0 6px 14px rgba(15,23,42,.06)}
    .item:active{cursor:grabbing}
    .item .emoji{font-size:20px}
    .item[data-group="grains"]{--g:#fde68a}
    .item[data-group="veggies"]{--g:#bbf7d0}
    .item[data-group="fruits"]{--g:#fecaca}
    .item[data-group="protein"]{--g:#c7d2fe}
    .item[data-group="dairy"]{--g:#bae6fd}
    .item[data-group="fats"]{--g:#fef08a}
    .hint-on .item{background:var(--g)}

    .legend{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px}
    .tag{font-size:12px; padding:4px 8px; border-radius:999px; background:#1118270a}

    .scorebox{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .score{font-weight:900; font-size:20px}
    .toast{margin-top:10px; padding:10px 12px; border-radius:12px; background:#ecfdf5; color:#064e3b; display:none}
    .toast.error{background:#fef2f2; color:#7f1d1d}

    .footer-note{color:var(--muted); font-size:12px; margin-top:8px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏•‡∏á <span style="white-space:nowrap">Food Pyramid</span> (‡∏õ.5)</h1>
        <div class="subtitle">‡∏•‡∏≤‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏ù‡∏∂‡∏Å‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ 5 ‡∏´‡∏°‡∏π‡πà</div>
      </div>
      <div class="controls">
        <button id="btnCheck">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        <button id="btnHint" class="secondary">‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î Hint</button>
        <button id="btnReset" class="warn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      </div>
    </header>

    <section class="board">
      <!-- PYRAMID AREA -->
      <div class="card">
        <h2 style="margin-top:0">‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
        <div class="legend" id="legend"></div>
        <div class="pyramid" id="pyramid"></div>
        <div class="toast" id="toast"></div>
      </div>

      <!-- POOL AREA -->
      <div class="card">
        <div class="scorebox">
          <div class="score" id="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0</div>
          <div id="progress"></div>
        </div>
        <p style="margin:.4rem 0 1rem">‡∏•‡∏≤‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î ‡∏ñ‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡∏ú‡∏¥‡∏î‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏≤‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ</p>
        <div class="pool" id="pool"></div>
        <div class="footer-note">‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡∏Å‡∏î <strong>‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î Hint</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏π‡πà (‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏î‡πá‡∏Å ‡∏õ.5 ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏°‡∏ß‡∏î‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô)</div>
      </div>
    </section>
  </div>

  <script>
    // --- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏°‡∏ß‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏° ---
    const GROUPS = [
      {key:'grains',  label:'‡∏ò‡∏±‡∏ç‡∏û‡∏∑‡∏ä/‡∏Ç‡πâ‡∏≤‡∏ß-‡πÅ‡∏õ‡πâ‡∏á', icon:'üçö', color:'#fde68a', tip:'‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢'},
      {key:'veggies', label:'‡∏ú‡∏±‡∏Å',               icon:'ü•¶', color:'#bbf7d0', tip:'‡∏°‡∏µ‡πÉ‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô ‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡πÅ‡∏£‡πà'},
      {key:'fruits',  label:'‡∏ú‡∏•‡πÑ‡∏°‡πâ',            icon:'üçé', color:'#fecaca', tip:'‡πÉ‡∏´‡πâ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥'},
      {key:'protein', label:'‡πÄ‡∏ô‡∏∑‡πâ‡∏≠/‡∏ñ‡∏±‡πà‡∏ß/‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô', icon:'üçó', color:'#c7d2fe', tip:'‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ ‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠'},
      {key:'dairy',   label:'‡∏ô‡∏°/‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ô‡∏°',   icon:'ü•õ', color:'#bae6fd', tip:'‡πÅ‡∏Ñ‡∏•‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏ô'},
      {key:'fats',    label:'‡πÑ‡∏Ç‡∏°‡∏±‡∏ô/‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•',     icon:'üç©', color:'#fef08a', tip:'‡∏Å‡∏¥‡∏ô‡πÅ‡∏ï‡πà‡∏ô‡πâ‡∏≠‡∏¢ ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏π‡∏á'}
    ];

    const ITEMS = [
      // grains
      {name:'‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢', emoji:'üçö', group:'grains'},
      {name:'‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á', emoji:'üçû', group:'grains'},
      {name:'‡∏ö‡∏∞‡∏´‡∏°‡∏µ‡πà/‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß', emoji:'üçú', group:'grains'},
      // veggies
      {name:'‡∏ö‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏•‡∏µ', emoji:'ü•¶', group:'veggies'},
      {name:'‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó', emoji:'ü•ï', group:'veggies'},
      {name:'‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤', emoji:'ü•í', group:'veggies'},
      // fruits
      {name:'‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•', emoji:'üçé', group:'fruits'},
      {name:'‡∏Å‡∏•‡πâ‡∏ß‡∏¢', emoji:'üçå', group:'fruits'},
      {name:'‡∏™‡πâ‡∏°', emoji:'üçä', group:'fruits'},
      // protein
      {name:'‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á', emoji:'üçó', group:'protein'},
      {name:'‡∏õ‡∏•‡∏≤', emoji:'üêü', group:'protein'},
      {name:'‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ', emoji:'üßà', group:'protein'},
      // dairy
      {name:'‡∏ô‡∏°', emoji:'ü•õ', group:'dairy'},
      {name:'‡πÇ‡∏¢‡πÄ‡∏Å‡∏¥‡∏£‡πå‡∏ï', emoji:'ü•Ø', group:'dairy'},
      {name:'‡∏ä‡∏µ‡∏™', emoji:'üßÄ', group:'dairy'},
      // fats & sweets
      {name:'‡πÇ‡∏î‡∏ô‡∏±‡∏ó', emoji:'üç©', group:'fats'},
      {name:'‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡∏ó‡∏≠‡∏î', emoji:'üçü', group:'fats'},
      {name:'‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï', emoji:'üç´', group:'fats'},
    ];

    // --- ‡∏™‡∏£‡πâ‡∏≤‡∏á UI ---
    const pyramidEl = document.getElementById('pyramid');
    const poolEl = document.getElementById('pool');
    const scoreEl = document.getElementById('score');
    const progressEl = document.getElementById('progress');
    const toastEl = document.getElementById('toast');
    const legendEl = document.getElementById('legend');
    const btnReset = document.getElementById('btnReset');
    const btnCheck = document.getElementById('btnCheck');
    const btnHint = document.getElementById('btnHint');

    // render legend
    GROUPS.forEach(g=>{
      const t=document.createElement('span');
      t.className='tag';
      t.textContent=`${g.icon} ${g.label}`;
      t.style.background=g.color;
      legendEl.appendChild(t);
    });

    // render pyramid rows (base -> top)
    GROUPS.forEach(g=>{
      const row=document.createElement('div'); row.className='row';
      const label=document.createElement('div'); label.className='row-label';
      label.innerHTML=`${g.icon} <strong>${g.label}</strong><div style="font-size:12px;color:#64748b">${g.tip}</div>`;
      const drop=document.createElement('div'); drop.className='dropzone'; drop.dataset.accept=g.key;
      row.append(label,drop); pyramidEl.appendChild(row);
      enableDropzone(drop);
    });

    // render items (shuffle first)
    function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}return arr}
    const items = shuffle(ITEMS.map((it,idx)=>({...it,id:'i'+idx})));

    items.forEach(addItemToPool);

    function addItemToPool(it){
      const el=document.createElement('div'); el.className='item';
      el.draggable=true; el.id=it.id; el.dataset.group=it.group; el.setAttribute('aria-grabbed','false');
      el.innerHTML=`<span class="emoji">${it.emoji}</span><span>${it.name}</span>`;
      el.addEventListener('dragstart', e=>{e.dataTransfer.setData('text/plain', it.id); el.classList.add('dragging'); el.setAttribute('aria-grabbed','true')});
      el.addEventListener('dragend', ()=>{el.classList.remove('dragging'); el.setAttribute('aria-grabbed','false')});
      poolEl.appendChild(el);
    }

    function enableDropzone(zone){
      zone.addEventListener('dragover', e=>{e.preventDefault(); zone.classList.add('is-over')});
      zone.addEventListener('dragleave', ()=> zone.classList.remove('is-over'));
      zone.addEventListener('drop', e=>{
        e.preventDefault(); zone.classList.remove('is-over');
        const id = e.dataTransfer.getData('text/plain');
        const el = document.getElementById(id);
        if(!el) return;
        zone.appendChild(el);
        updateProgress();
      });
    }

    // allow dropping back into pool
    enableDropzone(poolEl);

    function updateProgress(){
      const placed = document.querySelectorAll('.dropzone .item').length;
      progressEl.textContent = `‡∏ß‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ${placed}/${ITEMS.length} ‡∏ä‡∏¥‡πâ‡∏ô`;
    }

    function checkAnswers(){
      let correct=0, wrong=0;
      document.querySelectorAll('.dropzone').forEach(zone=>{
        const accept = zone.dataset.accept;
        zone.querySelectorAll('.item').forEach(it=>{
          if(it.dataset.group===accept){correct++; it.style.outline='2px solid var(--ok)'}
          else {wrong++; it.style.outline='2px solid var(--error)'}
        })
      })
      scoreEl.textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${correct} / ${ITEMS.length}`;
      if(wrong===0 && correct===ITEMS.length){
        showToast('‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏à‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚úÖ', false);
      }else if(correct===0){
        showToast('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏•‡∏≠‡∏á‡∏Å‡∏î "‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î Hint" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏∞', true);
      }else{
        showToast(`‡∏ñ‡∏π‡∏Å ${correct} ‡∏ä‡∏¥‡πâ‡∏ô ‡∏ú‡∏¥‡∏î ${wrong} ‡∏ä‡∏¥‡πâ‡∏ô ‚Äî ‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏µ‡πÅ‡∏î‡∏á`, true);
      }
    }

    function showToast(msg, isError){
      toastEl.textContent=msg; toastEl.style.display='block';
      toastEl.classList.toggle('error', !!isError);
    }

    function resetGame(){
      // clear outlines & toast
      document.querySelectorAll('.item').forEach(it=> it.style.outline='none');
      toastEl.style.display='none';
      // move all items back & reshuffle
      const all=[...document.querySelectorAll('.item')];
      all.forEach(el=> poolEl.appendChild(el));
      shuffle(all).forEach(el=> poolEl.appendChild(el));
      scoreEl.textContent='‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0';
      updateProgress();
    }

    function toggleHint(){
      document.body.classList.toggle('hint-on');
    }

    btnCheck.addEventListener('click', checkAnswers);
    btnReset.addEventListener('click', resetGame);
    btnHint.addEventListener('click', toggleHint);

    updateProgress();

    // --- Keyboard support (‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô) ---
    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏°‡∏î‡πâ‡∏ß‡∏¢ Enter ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á
    let selectedEl=null;
    document.addEventListener('keydown', (e)=>{
      if(e.key!=='Enter') return;
      const active = document.activeElement;
      if(active && active.classList.contains('item')){
        selectedEl = active; active.style.outline='3px solid var(--brand)';
        showToast('‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß: ‡πÑ‡∏õ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á', false);
      }else if(active && active.classList.contains('dropzone')){
        if(selectedEl){ active.appendChild(selectedEl); selectedEl.style.outline='none'; selectedEl=null; updateProgress(); }
      }
    });

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ focus ‡πÑ‡∏î‡πâ
    document.querySelectorAll('.item, .dropzone').forEach(el=> el.tabIndex=0);
  </script>
</body>
</html>
